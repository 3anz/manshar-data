{"id":9008,"guid":"h3PfBUf6IxE_MBKQG_tWXg","title":"تعديل مشكلة الأحرف العربية في الروابط (URL Slug) على منصة Flarum","tagline":"السلام عليكم  لا أدري كم من مرة أحاول الاشتراك بمنصة منشر الرائعة  لأبدأ سلسلة تدوين باذن الله طويلة  أعبّر فيها عن بعض خواطري و تحديات الحياة التي واجهتها  و حتى هوايتي المفضلة التقنية و التطوير    ...","published_at":"2017-08-09T12:27:13.212Z","published":true,"updated_at":"2017-08-09T12:27:10.554Z","slug":"تعديل-مشكلة-الأحرف-العربية-في-الروابط-url-slug-على-منصة-flarum","publication_slug":null,"recommendations_count":1,"comments_count":2,"pickabilities_count":1,"reading_time":2,"current_user_can_edit":null,"json_model":"{\"sections\":[{\"name\":\"j12n5203\",\"component\":\"Section\",\"components\":[{\"name\":\"d7ghdbvy\",\"tagName\":\"div\",\"type\":\"layout-single-column\",\"component\":\"Layout\",\"components\":[{\"component\":\"Paragraph\",\"name\":\"zc3x7dbs\",\"text\":\"تعديل مشكلة الأحرف العربية في الروابط (URL Slug) على منصة Flarum\",\"placeholderText\":\"عنوان المقال\",\"paragraphType\":\"h1\"},{\"component\":\"Paragraph\",\"name\":\"8ut04o2l\",\"text\":\"السلام عليكم، لا أدري كم من مرة أحاول الاشتراك بمنصة منشر الرائعة، لأبدأ سلسلة تدوين باذن الله طويلة. أعبّر فيها عن بعض خواطري و تحديات الحياة التي واجهتها، و حتى هوايتي المفضلة التقنية و التطوير.\",\"placeholderText\":\"اكتب مقالك هنا\",\"paragraphType\":\"p\"},{\"component\":\"Paragraph\",\"name\":\"mh7eg6jb\",\"text\":\"عموماً، كنت أحاول تحديث تعريب النسخة الجديدة من برنامج ادارة المحتوى Flarum المتميزة (النسخة Beta 7)، شبيه بموقع Reddit من حيث الأسلوب و يعتمد على البساطة في كل شئ، لا حاجة للاضافات المتكررة المملّة. جاء التعريب بعد اتصالي بالأخ سامي مسعود الذي بدأ المسيرة باطلاق النسخة العربية الأولى- عبارة عن إضافة (Extension) - بتاريخ 15 سبتمبر 2015 و حملت معها نسختين:\",\"placeholderText\":\"\",\"paragraphType\":\"p\",\"formats\":[{\"type\":\"a\",\"from\":69,\"to\":75,\"attrs\":{\"href\":\"http://flarum.org/\"}},{\"type\":\"a\",\"from\":229,\"to\":239,\"attrs\":{\"href\":\"https://io.hsoub.com/u/samymassoud\"}},{\"type\":\"em\",\"from\":287,\"to\":313}]},{\"component\":\"Paragraph\",\"name\":\"3pcdej17\",\"text\":\"النسخة الأولى: Arabic Extension تحمل معها اضافة تغيير الاتجاه من اليمين الى اليسار RTL و معها أيضا ملف تعريب الجُمل و الكلمات فاقت 300 جملة معرّبة.\",\"placeholderText\":\"\",\"paragraphType\":\"p\",\"formats\":[{\"type\":\"strong\",\"from\":0,\"to\":14},{\"type\":\"a\",\"from\":15,\"to\":31,\"attrs\":{\"href\":\"https://discuss.flarum.org/d/991-arabic-extension-is-here-with-rtl-support\"}},{\"type\":\"strong\",\"from\":48,\"to\":61},{\"type\":\"strong\",\"from\":103,\"to\":108}]},{\"component\":\"Paragraph\",\"name\":\"00okumk1\",\"text\":\"النسخة الثانية: Flarum RTL extension نسخة منفصلة تحمل اضافة تغيير الاتجاه RTL فقط.\",\"placeholderText\":\"\",\"paragraphType\":\"p\",\"formats\":[{\"type\":\"strong\",\"from\":0,\"to\":15},{\"type\":\"a\",\"from\":16,\"to\":36,\"attrs\":{\"href\":\"https://discuss.flarum.org/d/2484-flarum-rtl-extension\"}}]},{\"component\":\"Paragraph\",\"name\":\"4uefn695\",\"text\":\"اتصلت بالأخ مسعود ليخبرني بجديد عمله و لما توقف موقع الدعم العربي لفلاروم أرابيا FlarumArabia، ليخبرني بأنه لم يجد الدعم الكافي و تكلفة قيمة ايجار الاستضافة الخاصة،  جزاه الله عنّا كل خير.\",\"placeholderText\":\"\",\"paragraphType\":\"p\",\"formats\":[{\"type\":\"a\",\"from\":81,\"to\":93,\"attrs\":{\"href\":\"flarumarabia.com\"}}]},{\"component\":\"Paragraph\",\"name\":\"x9tutkzp\",\"text\":\"من بين المشاكل التي لم تحل، هي مشكلة تعريب الروابط (URL Slug) و كان شكلها مبهم عند كتابة عنوان ما باللغة العربية، و ضعيف جداً لتحسين نتائج SEO لموقعك. كان شكله: \",\"placeholderText\":\"\",\"paragraphType\":\"p\"},{\"component\":\"MonacoEditor\",\"name\":\"l0w34ehv\",\"value\":\"# http://localhost/flarum/d/2---\",\"language\":\"php\",\"scriptPath\":\"/node_modules/monaco-editor/min/vs\"},{\"component\":\"Paragraph\",\"name\":\"rbrgtptt\",\"text\":\"و جميع الاضافات التي طرحت لحلّ المشكلة كانت غير كافية حيث كانت تحول الحروف العربية مكتوبة كَنُطقِها بالانجليزية: \",\"placeholderText\":\"\",\"paragraphType\":\"p\"},{\"component\":\"MonacoEditor\",\"name\":\"6943dz82\",\"value\":\"# http://localhost/flarum/d/3-tjrb-l-lm-lmyy\",\"language\":\"php\",\"scriptPath\":\"/node_modules/monaco-editor/min/vs\"},{\"component\":\"Paragraph\",\"name\":\"n1bkwvnp\",\"text\":\"بحثت عن الملف المسؤول لتحرير الروابط Slug و تبين أنه يحمل تعابير قياسية (Preg-Replace) تمنع ظهور الاحرف العربية .. ببساطة أضفت اليه قيم الأحرف العربية لكلاّ يحذفها، لتفعل ذلك يم قم بتحرير ملف str.php على المسار التالي:\",\"placeholderText\":\"\",\"paragraphType\":\"p\"},{\"component\":\"MonacoEditor\",\"name\":\"3n12clxf\",\"value\":\"// @/PATH/flarum/vendor/flarum/core/src/Util/Str.php\",\"language\":\"php\",\"scriptPath\":\"/node_modules/monaco-editor/min/vs\"},{\"component\":\"Paragraph\",\"name\":\"wm1sblit\",\"text\":\"و استبداله بالوظيفة Function المعدّلة : \",\"placeholderText\":\"\",\"paragraphType\":\"p\"},{\"component\":\"MonacoEditor\",\"name\":\"6rtzgzk4\",\"value\":\"    <?php \\n\\t\\n\\tpublic static function slug($str)\\n    {\\n        $str = strtolower($str);\\n        $str = preg_replace('/[^a-z0-9_\\\\s-ءاأإآؤئبتثجحخدذرزسشصضطظعغفقكلمنهويةى]#u/i', '-', $str);\\n        $str = preg_replace('/-+/', '-', $str);\\n        $str = preg_replace('/-$|^-/', '', $str);\\n        $str = str_replace(' ', '-', $str);\\n\\n        return $str ?: '-';\\n    }\",\"language\":\"php\",\"scriptPath\":\"/node_modules/monaco-editor/min/vs\"},{\"component\":\"Paragraph\",\"name\":\"6glbfss9\",\"text\":\"تجربة ناجحة: \",\"placeholderText\":\"\",\"paragraphType\":\"p\"},{\"component\":\"MonacoEditor\",\"name\":\"hase9g9c\",\"value\":\"# http://localhost/flarum/d/13-تجربة-رابط-باللغة-العربية-arabic-slug\",\"language\":\"php\",\"scriptPath\":\"/node_modules/monaco-editor/min/vs\"},{\"component\":\"Paragraph\",\"name\":\"2bjaicc7\",\"text\":\"و أخيراً، هذه مقدمة بسيطة جداً أفتتح بها باب التدوين انشاء الله، في المرة القادمة سأقوم بالتعديل الكلّي لاتجاه المنتدى من اليمين لليسار RTL لكل التحديثات التي ظهرت مع النسخة الجديدة.\",\"placeholderText\":\"\",\"paragraphType\":\"p\"},{\"component\":\"Paragraph\",\"name\":\"chfxg2bx\",\"text\":\"لا يسعني الا أن أشكر محمد خطيب على المنصة و كل الداعمين له، نسأل الله لهم التوفيق و السداد و السلام عليكم.\",\"placeholderText\":\"\",\"paragraphType\":\"p\"}]}]}]}","created_at":"2017-08-09T09:27:24.337Z","followers_count":1,"hotness":770.0,"articles":[{"id":8989,"guid":"94DIQOEYh4DpbD_cgT_Wgg","title":"العيش ضمن الاتجاهين ","tagline":"طاقة كبيرة    هائلة    لا أريد النوم    أريد أن أركض    أن أتعلم العزف    أن أرسم    أن اقرأ    أن اكتب    اضحك ولا أستطيع التوقف   \"ما الذي يضحكك؟!\" صديقتي تتسائل   ...","published_at":"2017-08-07T23:48:49.984Z","published":true,"updated_at":"2017-08-07T23:48:48.724Z","slug":"العيش-ضمن-الاتجاهين","publication_slug":null,"recommendations_count":3,"comments_count":1,"pickabilities_count":1,"reading_time":2,"thumbs_srcs":[],"thumbs_srcsets":[],"user":{"id":177,"name":"روان خطيب","published_articles_count":8,"nickname":"rkhatib","thumb_url":"https://api.manshar.com/media/W1siZiIsIjIwMTcvMDEvMjAvMTIvNDYvNDUvNjc1LzE1OTQxMTUwXzE5MDg0OTMyOTI3MDUyMTlfMjI1OTk2OTg1NjM0Mjg5ODcwMl9uLmpwZyJdLFsicCIsInRodW1iIiwiNDAweDQwMCMiXV0/15941150_1908493292705219_2259969856342898702_n.jpg","followed_by_current_user":null,"follows_current_user":null,"current_user_pickability":null},"publication":null,"followed_by_current_user":null,"current_user_pickability":null,"topic":{"id":405,"title":"علم نفس","category":{"id":6,"color":"#aa1133"}}}],"user":{"id":4749,"name":"عبدالهادي جعفر","published_articles_count":1,"nickname":"abdelhadi","bio":"احب المجازفة، احب التحدي، احب السفر","created_at":"2017-06-07T00:07:56.263Z","admin":false,"editor":false,"comments_count":1,"recommendations_count":0,"followers_count":3,"following_users_count":0,"created_nickname_at":"2018-10-07T16:46:22.356Z","pickabilities_count":0,"avatar_url":"https://api.manshar.com/media/W1siZiIsIjIwMTgvMTAvMDcvMTYvNDYvMjIvZDEwYWE1MGEtNjYwNC00MGM1LWFkZjMtMTNiN2IzY2NmMTM5L3hLUHotZTZSXzQwMHg0MDAuanBnIl1d/xKPz-e6R_400x400.jpg","thumb_url":"https://api.manshar.com/media/W1siZiIsIjIwMTgvMTAvMDcvMTYvNDYvMjIvZDEwYWE1MGEtNjYwNC00MGM1LWFkZjMtMTNiN2IzY2NmMTM5L3hLUHotZTZSXzQwMHg0MDAuanBnIl0sWyJwIiwidGh1bWIiLCI0MDB4NDAwIyJdXQ/xKPz-e6R_400x400.jpg","followed_by_current_user":null,"follows_current_user":null,"current_user_pickability":null,"profiles":{"gplus":{"uid":"115112998220782882891","provider":"gplus","nickname":"115112998220782882891"}},"cover_url":"https://api.manshar.com/media/W1siZiIsIjIwMTgvMTAvMDcvMTYvNDYvMjIvZDEwYWE1MGEtNjYwNC00MGM1LWFkZjMtMTNiN2IzY2NmMTM5L3hLUHotZTZSXzQwMHg0MDAuanBnIl0sWyJwIiwidGh1bWIiLCIxOTAweDEyMDAjIl1d/xKPz-e6R_400x400.jpg"},"publication":null,"topic":{"id":32,"title":"تحسين أداء المواقع","articles_count":5,"followers_count":16,"pickabilities_count":1,"created_at":"2015-02-21T23:40:34.486Z","updated_at":"2015-02-21T23:40:34.486Z","category":{"id":1,"title":"علوم وتكنولوجيا","color":"#03A9F4","icon_cssclass":"fa-desktop","created_at":"2015-01-20T07:47:50.785Z","updated_at":"2015-02-02T04:45:52.579Z","articles_count":340,"topics_count":128,"description":"مواضيع حول العلوم المختلفة، الأحياء، الفيزياء، تكنولوجيا وغيرها","followers_count":31,"original_image_url":"https://api.manshar.com/media/W1siZiIsIjIwMTUvMDIvMDIvMDQvNDUvNTIvNDIyL2NvbXB1dGVyXzgyMzcxXzEyODAuanBnIl1d","followed_by_current_user":null,"image_thumb_url":"https://api.manshar.com/media/W1siZiIsIjIwMTUvMDIvMDIvMDQvNDUvNTIvNDIyL2NvbXB1dGVyXzgyMzcxXzEyODAuanBnIl0sWyJwIiwidGh1bWIiLCI4MHg4MCMiXV0","icon_url":null},"followed_by_current_user":null},"followed_by_current_user":null,"current_user_pickability":null,"tags":[{"id":30,"title":"تحسين أداء المواقع","slug":"تحسين-أداء-المواقع","articles_count":0,"followers_count":1,"pickabilities_count":0,"followed_by_current_user":null,"current_user_pickability":null}]}